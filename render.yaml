------services:services:services:services:

services:

- name: rezgenie-frontendservices:

  type: web

  runtime: node- name: rezgenie-frontend- name: rezgenie-frontend

  buildCommand: cd frontend && npm install && npm run build

  startCommand: cd frontend && npm start  type: web

  envVars:

  - key: NEXT_PUBLIC_API_URL  runtime: node  type: web- name: rezgenie-frontend

    value: https://api.rezgenie.app

  - key: NODE_ENV  buildCommand: cd frontend && npm install && npm run build

    value: production

  startCommand: cd frontend && npm start  runtime: node

- name: rezgenie-api

  type: web  envVars:

  runtime: python

  buildCommand: cd backend && pip install --no-cache-dir -r requirements.txt && alembic upgrade head  - key: NEXT_PUBLIC_API_URL  buildCommand: cd frontend && npm install && npm run build  type: web  # Frontend Service  # Frontend Service

  startCommand: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT

  envVars:    value: https://api.rezgenie.app

  - key: ENVIRONMENT

    value: production  - key: NODE_ENV  startCommand: cd frontend && npm start

  - key: STORAGE_PROVIDER

    value: r2    value: production

  - key: R2_ENDPOINT

    fromGroup: rezgenie-secrets- name: rezgenie-api  envVars:  runtime: node

  - key: R2_ACCESS_KEY

    fromGroup: rezgenie-secrets  type: web

  - key: R2_SECRET_KEY

    fromGroup: rezgenie-secrets  runtime: python  - key: NEXT_PUBLIC_API_URL

  - key: R2_BUCKET_NAME

    value: rezgenie-uploads  buildCommand: apt-get update && apt-get install -y gcc g++ make cmake python3-dev && cd backend && pip install --no-cache-dir -r requirements.txt && alembic upgrade head

  - key: DATABASE_URL

    fromGroup: rezgenie-secrets  startCommand: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT    value: https://api.rezgenie.app  buildCommand: cd frontend && npm install && npm run build  - type: web  - type: web

  - key: REDIS_URL

    fromGroup: rezgenie-secrets  envVars:

  - key: CELERY_BROKER_URL

    fromGroup: rezgenie-secrets  - key: ENVIRONMENT  - key: NODE_ENV

  - key: CELERY_RESULT_BACKEND

    fromGroup: rezgenie-secrets    value: production

  - key: JWT_SECRET_KEY

    fromGroup: rezgenie-secrets  - key: STORAGE_PROVIDER    value: production  startCommand: cd frontend && npm start

  - key: OPENAI_API_KEY

    fromGroup: rezgenie-secrets    value: r2

  - key: OPENAI_MODEL

    value: gpt-4-1106-preview  - key: R2_ENDPOINT

  - key: ADZUNA_APP_ID

    fromGroup: rezgenie-secrets    fromGroup: rezgenie-secrets

  - key: ADZUNA_APP_KEY

    fromGroup: rezgenie-secrets  - key: R2_ACCESS_KEY- name: rezgenie-api  envVars:    name: rezgenie-frontend    name: rezgenie-frontend

  packages:

  - gcc    fromGroup: rezgenie-secrets

  - g++

  - make  - key: R2_SECRET_KEY  type: web

  - cmake

  - python3-dev    fromGroup: rezgenie-secrets



- name: rezgenie-worker  - key: R2_BUCKET_NAME  runtime: python  - key: NEXT_PUBLIC_API_URL

  type: worker

  runtime: python    value: rezgenie-uploads

  buildCommand: cd backend && pip install --no-cache-dir -r requirements.txt

  startCommand: cd backend && celery -A app.celery.celery_app worker --loglevel=info  - key: DATABASE_URL  buildCommand: >

  envVars:

  - key: ENVIRONMENT    fromGroup: rezgenie-secrets

    value: production

  - key: STORAGE_PROVIDER  - key: REDIS_URL    apt-get update && apt-get install -y gcc g++ make cmake python3-dev &&    value: https://api.rezgenie.app    runtime: node    env: node

    value: r2

  - key: R2_ENDPOINT    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: R2_ACCESS_KEY  - key: CELERY_BROKER_URL    cd backend && pip install --no-cache-dir -r requirements.txt && alembic upgrade head

    fromGroup: rezgenie-secrets

  - key: R2_SECRET_KEY    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: R2_BUCKET_NAME  - key: CELERY_RESULT_BACKEND  startCommand: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT  - key: NODE_ENV

    value: rezgenie-uploads

  - key: DATABASE_URL    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: REDIS_URL  - key: JWT_SECRET_KEY  envVars:

    fromGroup: rezgenie-secrets

  - key: CELERY_BROKER_URL    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: CELERY_RESULT_BACKEND  - key: OPENAI_API_KEY  - key: ENVIRONMENT    value: production    buildCommand: cd frontend && npm install && npm run build    buildCommand: cd frontend && npm install && npm run build

    fromGroup: rezgenie-secrets

  - key: OPENAI_API_KEY    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: OPENAI_MODEL  - key: OPENAI_MODEL    value: production

    value: gpt-4-1106-preview

  - key: ADZUNA_APP_ID    value: gpt-4-1106-preview

    fromGroup: rezgenie-secrets

  - key: ADZUNA_APP_KEY  - key: ADZUNA_APP_ID  - key: STORAGE_PROVIDER

    fromGroup: rezgenie-secrets

  packages:    fromGroup: rezgenie-secrets

  - gcc

  - g++  - key: ADZUNA_APP_KEY    value: r2

  - make

  - cmake    fromGroup: rezgenie-secrets

  - python3-dev
- name: rezgenie-worker  - key: R2_ENDPOINT- name: rezgenie-api    startCommand: cd frontend && npm start    startCommand: cd frontend && npm start

  type: worker

  runtime: python    fromGroup: rezgenie-secrets

  buildCommand: apt-get update && apt-get install -y gcc g++ make cmake python3-dev && cd backend && pip install --no-cache-dir -r requirements.txt

  startCommand: cd backend && celery -A app.celery.celery_app worker --loglevel=info  - key: R2_ACCESS_KEY  type: web

  envVars:

  - key: ENVIRONMENT    fromGroup: rezgenie-secrets

    value: production

  - key: STORAGE_PROVIDER  - key: R2_SECRET_KEY  runtime: python    envVars:    envVars:

    value: r2

  - key: R2_ENDPOINT    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: R2_ACCESS_KEY  - key: R2_BUCKET_NAME  buildCommand: >

    fromGroup: rezgenie-secrets

  - key: R2_SECRET_KEY    value: rezgenie-uploads

    fromGroup: rezgenie-secrets

  - key: R2_BUCKET_NAME  - key: DATABASE_URL    apt-get update && apt-get install -y gcc g++ make cmake &&      - key: NEXT_PUBLIC_API_URL      - key: NEXT_PUBLIC_API_URL

    value: rezgenie-uploads

  - key: DATABASE_URL    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: REDIS_URL  - key: REDIS_URL    cd backend && pip install -r requirements.txt && alembic upgrade head

    fromGroup: rezgenie-secrets

  - key: CELERY_BROKER_URL    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: CELERY_RESULT_BACKEND  - key: CELERY_BROKER_URL  startCommand: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT        value: https://api.rezgenie.app        value: https://api.rezgenie.app

    fromGroup: rezgenie-secrets

  - key: OPENAI_API_KEY    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: OPENAI_MODEL  - key: CELERY_RESULT_BACKEND  envVars:

    value: gpt-4-1106-preview

  - key: ADZUNA_APP_ID    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

  - key: ADZUNA_APP_KEY  - key: JWT_SECRET_KEY  - key: ENVIRONMENT      - key: NODE_ENV      - key: NODE_ENV

    fromGroup: rezgenie-secrets
    fromGroup: rezgenie-secrets

  - key: OPENAI_API_KEY    value: production

    fromGroup: rezgenie-secrets

  - key: OPENAI_MODEL  - key: STORAGE_PROVIDER        value: production        value: production

    value: gpt-4-1106-preview

  - key: ADZUNA_APP_ID    value: r2

    fromGroup: rezgenie-secrets

  - key: ADZUNA_APP_KEY  - key: R2_ENDPOINT

    fromGroup: rezgenie-secrets

    fromGroup: rezgenie-secrets

- name: rezgenie-worker

  type: worker  - key: R2_ACCESS_KEY  # Backend API Service  # Backend API Service

  runtime: python

  buildCommand: >    fromGroup: rezgenie-secrets

    apt-get update && apt-get install -y gcc g++ make cmake python3-dev &&

    cd backend && pip install --no-cache-dir -r requirements.txt  - key: R2_SECRET_KEY  - type: web  - type: web

  startCommand: cd backend && celery -A app.celery.celery_app worker --loglevel=info

  envVars:    fromGroup: rezgenie-secrets

  - key: ENVIRONMENT

    value: production  - key: R2_BUCKET_NAME    name: rezgenie-api    name: rezgenie-api

  - key: STORAGE_PROVIDER

    value: r2    value: rezgenie-uploads

  - key: R2_ENDPOINT

    fromGroup: rezgenie-secrets  - key: DATABASE_URL    runtime: python    env: python

  - key: R2_ACCESS_KEY

    fromGroup: rezgenie-secrets    fromGroup: rezgenie-secrets

  - key: R2_SECRET_KEY

    fromGroup: rezgenie-secrets  - key: REDIS_URL    buildCommand: |    buildCommand: cd backend && pip install -r requirements.txt && alembic upgrade head

  - key: R2_BUCKET_NAME

    value: rezgenie-uploads    fromGroup: rezgenie-secrets

  - key: DATABASE_URL

    fromGroup: rezgenie-secrets  - key: CELERY_BROKER_URL      # Install system dependencies    startCommand: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT

  - key: REDIS_URL

    fromGroup: rezgenie-secrets    fromGroup: rezgenie-secrets

  - key: CELERY_BROKER_URL

    fromGroup: rezgenie-secrets  - key: CELERY_RESULT_BACKEND      apt-get update && apt-get install -y gcc g++ make cmake    envVars:

  - key: CELERY_RESULT_BACKEND

    fromGroup: rezgenie-secrets    fromGroup: rezgenie-secrets

  - key: OPENAI_API_KEY

    fromGroup: rezgenie-secrets  - key: JWT_SECRET_KEY      # Install Python packages      - key: ENVIRONMENT

  - key: OPENAI_MODEL

    value: gpt-4-1106-preview    fromGroup: rezgenie-secrets

  - key: ADZUNA_APP_ID

    fromGroup: rezgenie-secrets  - key: OPENAI_API_KEY      cd backend && pip install -r requirements.txt && alembic upgrade head        value: production

  - key: ADZUNA_APP_KEY

    fromGroup: rezgenie-secrets    fromGroup: rezgenie-secrets

  - key: OPENAI_MODEL    startCommand: cd backend && uvicorn main:app --host 0.0.0.0 --port $PORT      - key: STORAGE_PROVIDER

    value: gpt-4-1106-preview
    envVars:        value: r2

      - key: ENVIRONMENT      - key: R2_ENDPOINT

        value: production        sync: false

      - key: STORAGE_PROVIDER      - key: R2_ACCESS_KEY

        value: r2        sync: false

      - key: R2_ENDPOINT      - key: R2_SECRET_KEY

        fromGroup: rezgenie-secrets        sync: false

      - key: R2_ACCESS_KEY      - key: R2_BUCKET_NAME

        fromGroup: rezgenie-secrets        value: rezgenie-uploads

      - key: R2_SECRET_KEY      - key: DATABASE_URL

        fromGroup: rezgenie-secrets        sync: false

      - key: R2_BUCKET_NAME      - key: REDIS_URL

        value: rezgenie-uploads        sync: false

      - key: DATABASE_URL      - key: JWT_SECRET_KEY

        fromGroup: rezgenie-secrets        sync: false

      - key: REDIS_URL      - key: OPENAI_API_KEY

        fromGroup: rezgenie-secrets        sync: false

      - key: CELERY_BROKER_URL      - key: OPENAI_MODEL

        fromGroup: rezgenie-secrets        value: gpt-4-1106-preview

      - key: CELERY_RESULT_BACKEND

        fromGroup: rezgenie-secrets  # Worker Service for Celery Tasks

      - key: JWT_SECRET_KEY  - type: worker

        fromGroup: rezgenie-secrets    name: rezgenie-worker

      - key: OPENAI_API_KEY    env: python

        fromGroup: rezgenie-secrets    buildCommand: cd backend && pip install -r requirements.txt

      - key: OPENAI_MODEL    startCommand: cd backend && celery -A app.celery.celery_app worker --loglevel=info

        value: gpt-4-1106-preview    envVars:
      - key: ENVIRONMENT
        value: production
      - key: STORAGE_PROVIDER
        value: r2
      - key: R2_ENDPOINT
        sync: false
      - key: R2_ACCESS_KEY
        sync: false
      - key: R2_SECRET_KEY
        sync: false
      - key: R2_BUCKET_NAME
        value: rezgenie-uploads
      - key: DATABASE_URL
        sync: false
      - key: REDIS_URL
        sync: false
      - key: JWT_SECRET_KEY
        sync: false
      - key: OPENAI_API_KEY
        sync: false
      - key: OPENAI_MODEL
        value: gpt-4-1106-preview